# 03/27 ê¸°ìˆ  ìŠ¤í„°ë””

ì‘ì„± ì¼ì‹œ: 2024ë…„ 3ì›” 26ì¼ ì˜¤ì „ 10:03
ìµœì¢… í¸ì§‘ ì¼ì‹œ: 2024ë…„ 3ì›” 28ì¼ ì˜¤í›„ 5:07
ì‘ì„±ì: myung hun kang
ìƒíƒœ: Backlog

### ê°•ì˜ ë“£ê³  ì˜¬ ë¶„ëŸ‰

ì„¹ì…˜ 13,  ì„¹ì…˜ 14 (302 ê¹Œì§€ )

## ì„¹ì…˜ 13 ì•± ë°°í¬í•˜ê¸°

ë°°í¬ ì´ë¡ , ì‹¤ìŠµ 

### ë°°í¬ì˜µì…˜

standard build 

- next build ë¡œ í”„ë¡œë•ì…˜ìš© ë¹Œë“œ ë²ˆë“¤ ìƒì„± ë° ì„œë²„ ì‚¬ì´ë“œ ì•± ì„œë²„ ìƒì„±
- ì‚¬ì „ ëœë”ë§ ë˜ëŠ” í˜ì´ì§€ë“¤ë„ ê°€ëŠ¥í•˜ë‹¤ but ë…¸ë“œ ì„œë²„ê°€ í•„ìš”í•˜ë‹¤.
    - getStaticProps ì™€ ê°™ì€ server ì—ì„œ ì‘ì—…ì´ í•„ìš”í•œ ê²ƒë“¤ì´ ìˆìœ¼ë‹ˆ ì„œë²„ê°€ í•„ìš”í•˜ë‹¤.
- ë³€ê²½ì‚¬í•­ì´ ìƒê¸°ë©´ ì¬ë°°í¬ë¥¼ í•´ì•¼í•œë‹¤.

full static build

- next export ë¡œ ë°°í¬ê°€ëŠ¥
- ìµœì í™”ëœ í”„ë¡œë•ì…˜ ë¹Œë“œ ë²ˆë“¤ì„ ë§Œë“¤ì§€ë§Œ 100í¼ì„¼íŠ¸ html css js ì˜ ì •ì ì¸ íŒŒì¼ì„
- 100ë¡œ ì •ì ì´ë¼ api ë‚˜ getStaticProps ê°™ì€ê±° ì‚¬ìš© ëª»í•¨
- ì½”ë“œ ìœ íš¨ì„± ê²€ì‚¬ ê°™ì€ ê±¸ ëª»í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œ ë¿ë§Œì•„ë‹ˆë¼ ë‹¤ë¥¸ ì»¨í…ì¸ ê°€ ì¡°ê¸ˆì´ë¼ë„ ë°”ë€Œë©´ ë¬´ì¡°ê±´ ì¬ ë°°í¬í•´ì•¼í•¨

### ì¼ë°˜ì ì¸ ë°°í¬ê³¼ì • & ê³ ë ¤ì‚¬í•­

1. í˜ì´ì§€ ì¬ í™•ì¸ , ì½”ë“œ ì •ë¦¬
2. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
    
    nextjs.config.js â†’ next ì„¤ì •ì„ ë„£ì„ ìˆ˜ ìˆìŒ
    
    ```jsx
    const {PHASE_PRODUCTION_SERVER} = require('next/constants') 
    
    module.exports = (phase) => 
    if(phase = PHASE_PRODUCTION_SERVER){
    	return {
    		env: {
    			mongodb_username: "",
    			mongodb_password: "",
    			mongodb_clustername: "cluster0",
    			mongodb_database: "my-site-dev",
    		}
    	}
    }
    
    return {
    	// nextjs í™ˆí˜ì´ì§€ì—ì„œ ê´€ë ¨ ì„¤ì •ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤. 
    		env: {
    			mongodb_username: "",
    			mongodb_password: "",
    			mongodb_clustername: "cluster0",
    			mongodb_database: "my-site-production",
    		}
    	}
    }
    
    ì‚¬ìš©í•  ë•ŒëŠ” ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ 
    process.env.mogodb_username ê³¼ ê°™ì€ ì‹ìœ¼ë¡œ ì‚¬ìš©
    
    ìœ„ì™€ ê°™ì€ PHASE_PRODUCTION_SERVER  ê°’ì„ ì‚¬ìš©í•´ì„œ env ë¥¼ phase ì— ë”°ë¼ì„œ ë‹¬ë¦¬ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤. 
    ```
    
3. ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸ ë¹Œë“œ 
    
    npm run build ë¡œ ë¹Œë“œë¥¼ í•˜ê³  í„°ë¯¸ë„ì— ë‚˜ì˜¤ëŠ” ì •ë³´ë¡œ ë¬¸ì œê°€ ìˆëŠ” íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤. 
    
4. 3ë²ˆì—ì„œ ë¬¸ì œ ìˆëŠ” ë¶€ë¶„ ìˆ˜ì • í›„ 1ë²ˆ ì¬í™•ì¸ 
5. ë°°í¬
    - npm run build ë¥¼ í•˜ë©´ .next íŒŒì¼ì´ ìƒê¹€
    - npm start ë¥¼ í•˜ë©´ í”„ë¡œë•ì…˜ ìƒíƒœë¡œ ë°°í¬ë¥¼ í•  ìˆ˜ ìˆìŒ

- NextJS ì•± êµ¬ì¶•í•˜ê¸°: ì˜µì…˜
    
    ### Standard Build
    
    **next build(í‘œì¤€ ìŠ¤í¬ë¦½íŠ¸)**
    
    Produces optimized production bundles and a server-side app: **Requires NodeJS server**
    
    Pages are pre-rendered (if possible) but **NodeJS server is required** for API routes, server-side pages and page revalidations
    
    **Re-deploy needed if code changes or you donâ€™t use revalidations** and need page updates
    
    ### **Full Static Build**
    
    **next export(ìŠ¤í¬ë¦½íŠ¸ ë”°ë¡œ ì¶”ê°€)**
    
    **Produces 100% static app** (HTML, CSS, JS): **No NodeJS server required**
    
    Doesnâ€™t work if your app uses API routes, server-side pages or wants to use page revalidations
    
    **Re-deploy needed for all code and content changes**
    
- Deployment Steps & Considerations
    1. Add page metadata, optimize code, remove unnecessary dependencies
    2. Use environment variables for variable data (e.g. database credentials, API keys, â€¦)
    3. Do a test build and test the production-ready app locally or on some test server
    4. Deploy!
    
- `next.config.js`: NextJS êµ¬ì„± íŒŒì¼ & í™˜ê²½ ë³€ìˆ˜ ì‘ì—…í•˜ê¸°
    
    [API Reference: next.config.js Options](https://nextjs.org/docs/app/api-reference/next-config-js)
    
    To add environment variables to the JavaScript bundle, openÂ `next.config.js`Â and add theÂ `env`Â config:
    
    next.config.js
    
    ```jsx
    module.exports = {
      env: {
        customKey: 'my-value',
      },
    }
    ```
    
    Now you can accessÂ `process.env.customKey`Â in your code. For example:
    
    ```jsx
    function Page() {
      return <h1>The value of customKey is: {process.env.customKey}</h1>
    }
     
    export default Page
    ```
    

- node js ì‚¬ìš© ë¶€ë¶„

```jsx
module.exports / const {} = require()
```

- npm run build ë¥¼ í•  ë•Œ ìš©ëŸ‰ì´ í° íŒŒì¼ ë¶€ë¶„ì„ í™•ì¸í•´ì„œ í•´ë‹¹ íŒŒì¼ì—ì„œ ìš©ëŸ‰ì„ ë§ì´ ì°¨ì§€í•˜ëŠ” ë¶€ë¶„ì„ ì¤„ì—¬ì„œ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤.

## ì„¹ì…˜ 14 ì¸ì¦ ì¶”ê°€í•˜ê¸°

- ì‚¬ìš©ìê°€ ì´ë¯¸ ê³„ì •ì´ ìˆëŠ” ìƒíƒœì¼ ë•Œ
    - ë¡œê·¸ì¸ ì–‘ì‹ì„ ì œì¶œ
    - ìš”ì²­ì´ ì„œë²„ë¡œ ë„˜ì–´ê°
    - ì…ë ¥ê°’ì„ ì„œë²„ì—ì„œ í•´ë‹¹ ì´ë©”ì¼ ì£¼ì†Œì™€ ë¹„ë²ˆì„ ê°€ì§€ëŠ” db ê°€ ìˆëŠ”ì§€ í™•ì¸í•¨
    - ì¸ì¦ ì„±ê³µ, ì‹¤íŒ¨ ì—¬ë¶€ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬
    - í´ë¼ì´ì–¸íŠ¸ëŠ” ë³´í˜¸ëœ ë¼ìš°íŠ¸ì— ì ‘ê·¼í•˜ê±°ë‚˜ ìƒˆë¡œìš´ ì¸ì¦ì„ ìœ„í•œ ë‹¨ê³„ë¡œ ë„˜ì–´ê°„ë‹¤.

- ê°€ì§œ ì¸ì¦ì„ í†µê³¼í•œ ìœ ì €ê°€ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— cridential êµí™˜ì´ ì´ë¤„ì ¸ì•¼í•¨

- ìœ„ì¡°í•  ìˆ˜ ì—†ëŠ” ìœ ì € ì¸ì¦ì´ í•„ìš”í•˜ë‹¤.
    - server-side session
        - ì„œë²„ì— ìœ ì €ì˜ ê³ ìœ  ì‹ë³„ìë¥¼ ì €ì¥í•˜ëŠ” ê²ƒ  session id ê°™ì€ê±°
        - í´ë¼ì´ì–¸íŠ¸ëŠ” ì´  session id ë¥¼ ì¿ í‚¤ë¡œ ê°€ì§€ê²Œ ë˜ê³  ì´ê±¸ ê³„ì† ì£¼ê³  ë°›ìœ¼ë©° ìœ ì € ì¸ì¦ì„ í•¨
        
    - autentication token
        - ì„œë²„ê°€ ê³ ìœ  ì‹ë³„ìë¥¼ ê°€ì§€ì§€ëŠ” ì•Šê³  ì„ì˜ì˜ ìœ ì € ì¸ì¦ì´ ê°€ëŠ¥í•œ í† í°ì„ ë§Œë“¤ì–´ ë³´ë‚¸ë‹¤.
        - í† í° ìì²´ê°€ ìœ ì €ë¥¼ ì¸ì¦í•´ì£¼ê¸° ë•Œë¬¸ì— ë”°ë¡œ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
        - ì´ í† í°ì„ ì£¼ê³  ë°›ìœ¼ë©´ì„œ ìœ ì €ì˜ ìœ íš¨í•œ ì ‘ê·¼ì„ ì¸ì¦í•œë‹¤.
        - JWT ê°™ì€ ê²ƒ
        

JWT 

- issuer data = ë°œê¸‰ìì˜ ì •ë³´
- ì»¤ìŠ¤í…€ ë°ì´í„° = ìœ ì €ì˜ ì •ë³´ê°™ì€ê±°
- secret key = í´ë¼ì´ì–¸íŠ¸ëŠ” ë³¼ ìˆ˜ ì—†ëŠ” JWT ë¥¼ ì¸ì¦í•˜ëŠ” ë¹„ë°€ í‚¤ â†’ ì„œë²„ì—ì„œë§Œ ê°€ì§€ê³  ìˆìŒ
- ì´ê²Œ ë‹¤ í•©ì³ì ¸ ìˆëŠ”ê²Œ JWT
- í† í°ì˜ ë‚´ìš©ì€ ì½ì„ ìˆ˜ ìˆìŒ â†’ ë¹„ë°€ í‚¤ëŠ” ëª» ì½ìŒ

OAuth / JWT / cookie session  ì˜ ì•Œì•„ë‘ëŠ” ê²ƒì´ ì¢‹ê² ë‹¤. 

## ë‹¤ìŒ ìŠ¤í„°ë”” í•  ê²ƒ ì•„ì´ë°ì´ì…˜

- nextjs ê³µì‹ í™ˆí˜ì´ì§€ì˜ learn ë¶€ë¶„ â†’ app router ì‚¬ìš©ì„ ìœ„í•œ ê°•ì˜
- ìœ ë°ë¯¸ js ê°•ì˜ ì‚¬ë‘”ê±° ë“£ê¸°
- ë‹¤ë¥¸ ì‚¬ëŒ ì½”ë“œë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ìˆëŠ” ìŠ¤í„°ë””ë©´ ì¢‹ê² ë‹¤.
- react19ì— ë“±ì¥í•œ ìƒˆë¡œìš´ ì£¼ìš” ê¸°ëŠ¥ ìµíˆê¸°
- ë°˜ì‘í˜• ì›¹ ê°œë°œ ê°•ì˜ ë“£ê¸°
- typescript, js, cs ì§€ì‹ ê´€ë ¨ ì±… ìŠ¤í„°ë””
- ìŠ¤í„°ë”” ì£¼ë„í•  ë¶„ ì •í•˜ê¸°

<aside>
ğŸ’¡ ìœ„ ë‚´ìš©ì„ í† ëŒ€ë¡œ ë‹¤ìŒì£¼ì— ì•ìœ¼ë¡œ ì–´ë–¤ ìŠ¤í„°ë””ë¥¼ í•˜ë©´ ì¢‹ì„ì§€ ê²°ì •í•˜ê¸°. ( í˜¹ì‹œë‚˜ ìƒˆë¡œìš´ê²Œ ìƒê¸°ë©´ ì–¸ì œë“  ì¶”ê°€ ê°€ëŠ¥)

</aside>

## ë‹¤ìŒì‹œê°„ ìˆ˜

ì„¹ì…˜ 14 ë§ˆë¬´ë¦¬ 

nextjs ê°•ì˜ ì •ë¦¬ 

ë‹¤ìŒ ìŠ¤í„°ë”” í•  ê±° ì •í•˜ê¸°
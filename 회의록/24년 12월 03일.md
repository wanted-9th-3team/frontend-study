# 12/03 기술 스터디

회의일: 2024년 12월 3일
작성자: 김재욱
참가자: 김재욱, 김진영, 명훈

## 이번시간

- **자바스크립트 + 리액트 디자인 패턴** (- 자바스크립트와 리액트의 최신 패턴과 렌더링, 성능 패턴까지)
- 끝까지.
- 책 마무리.
    - 책 저자가 [https://www.patterns.dev/](https://www.patterns.dev/) 만든 사람.
- 다음 주제 생각해오기.
    - Git
        - Pro Git

- 재욱
    - Chapter 13 렌더링 패턴
        - 렌더링 패턴의 중요성
            - 콘텐츠를 어디에서! 어떻게! 렌더링! 할 것인가?
                - 어디에서
                    - 웹서버
                    - 빌드서버
                    - 엣지(edge) 네트워크
                    - 클라이언트
                - 어떻게
                    - 한번에
                    - 부분적으로
                    - 점진적으로
            - CWV. 핵심 웹 지표 (
                - TTFB (Time to First Byte)
                    - 클라이언트가 페이지 콘텐츠의 첫 번째 바이트를 받는 데 걸리는 시간.
                - FCP (First Contentful Paint)
                    - 페이지 이동 후 브라우저가 콘텐츠의 첫 부분을 렌더링하는 데 걸리는 시간.
                - TTI (Time to Interactive)
                    - 페이지 로드 시작부터 사용자 입력에 빠르게 응답할 수 있을 때까지 걸리는 시간.
                - LCP (Largest Contentful Paint)
                    - 페이지의 주요 콘텐츠를 로드하고 렌더링하는 데 걸리는 시간.
                - CLS (Cumulative Layout Shift)
                    - 예상치 못한 레이아웃 변경을 방지하기 위한 시각적 안정성 측정.
                - FID (First Input Delay)
                    - 사용자가 페이지와 상호작용한 시점부터 이벤트 핸들러가 실행될 수 있는 시점까지의 시간.
        - 클라이언트 사이드 렌더링(CSR)
            - 대부분의 애플리케이션 로직이 클라이언트에서 실행.
            - 데이터를 가져오거나 저장하기 위한 API 호출로 서버와 상호작용.
            - 페이지 새로고침 없이 탐색을 지원하는 SPA를 구축할 수 있게 하여 뛰어난 사용자 경험을 제공.
            - 이미지 표시, 데이터 저장소에서 데이터 가져오기，이벤트 처리 등 페이지의 복잡성이 증가하면 페이지 렌더링에 필요한 자바스크립트 코드의 복잡성과 크기도 증가.
            - 큰 자바스크립트 번들을 만들도록 하여 페이지의 FCP와 TTI를 증가.
            - 큰 요청 객체와 API 응답과 같은 일련의 네트워크 요청으로 인해, 크롤러가 색인하기 전에 의미 있는 콘텐츠가 시간에 맞춰 렌더링되지 않을 수 있어 웹사이트의 SEO에 영향.
        - 서버 사이드 렌더링(SSR)
            - 가장 오래된 웹 콘텐츠 렌더링 방식 중 하나.
            - 전체 HTML을 서버에서 생성.
            - 데이터 저장소나 외부 API에서 가져온 데이터도 포함 가능.
            - 데이터 연결 및 fetching 작업이 서버에서 처리.
            - HTML 또한 서버에서 생성.
            - 요약
                - HTML을 서버에서 렌더링하고 클라이언트에서 다시 하이드레이션 하는데 필요한 자바스크립트를 함께 제공하는 것.
                - 하이드레이드션 = 비용.
                - SSR ⇒ 하이드레이션 과정 최적화.
        - 정적 렌더링 (Static Rendering)
            - 전체 페이지의 HTML을 빌드 시점에 미리 생성.
            - 정적인 HTML 콘텐츠는 CDN(ContentDeliveryNetwork)이나 엣지 네트워크에 쉽게 캐싱 가능.
            - 일반적인 SSR에 비해 페이지 요청을 처리하고, HTML 콘텐츠를 렌더링하고, 응답하는 데 걸리는 시간을 상당히 단축 가능.
            - 대표적 프레임워크 : Next.js, Gatsby, VuePress
        - ISR. 점진적 정적 생성 (Incremental Static Regeneration)
            - 정적 렌더링과 SSR을 결합한 방식.
            - 정적 페이지만 미리 렌더링하고 동적 페이지는 사용자 요청 시에 on-demand 방식으로 렌더링.
            - 빌드 시간이 단축되며, 특정 시간 간격마다 캐시를 자동으로 무효화하고 페이지를 다시 생성.
        - On-demand ISR
            - 일반 ISR과 달리, 정해진 시간 간격이 아니라 특정 이벤트 발생 시에 페이지가 재생성.
            - 일반 ISR에서는 업데이트된 페이지가 해당 페이지에 대한 사용자 요청을 처리한 엣지 네트워크 노드에만 캐시.
            - On-demand ISR은 엣지 네트워크 전체에 페이지를 다시 생성하고 재분배하므로, 자동으로 전 세계 사용자가 캐시된 오래된 콘텐츠가 아닌 최신 버전의 페이지를 볼수있음.
            - 불필요한 페이지 재생성과 서버리스 함수 호출을 피할 수 있어 일반 ISR에 비해 운영 비용을 절감 가능.
            - 항상 최신 상태를 유지하면서도 합리적인 비용으로 빠르고 동적인 웹사이트를 운영 가능.
        - 스트리밍 SSR
            - 큰 HTML 파일 하나를 생성하는 대신, 작은 조각(청크)chunk으로 나눠서 전송.
            - 리액트에 내장된 renderToNodeStream 함수를 사용.
            - 클라이언트는 데이터를 받는 동시에 UI를 그리기 시작할 수 있으므로, 매우 빠른 초기 로딩 경험을 제공 가능.
            - 스트리밍은 네트워크 정체 현상에 효과적.
                - 네트워크가 혼잡하여 더 이상 바이트를 전송할 수 없는 경우, 렌더러는 신호를 받아 네트워크가 해소될 때까지 스트리밍을 중단.
                - 서버는 메모리를 덜 사용하고 I/O가 필요한 상황에 더욱 민첩하게 반응 가능.
            - 리액트 16 버전부터 스트리밍을 지원.
        - 엣지 SSR
            - CDN의 모든 지역에서 서버 렌더링을 가능하게 하고, 콜드 부트 시간을 거의 0에 가깝게 줄여줌.
            - 서버리스 함수를 사용하면 전체 페이지를 서버 사이드에서 생성 가능.
            - 정적 렌더링의 뛰어난 성능과 SSR의 동적 이점을 동시에 가능.
        - 하이브리드 렌더링 (Hybrid Rendering)
            - 여러 가지 렌더링 방식을 결합.
            - 정적으로 제공될 수 있는 페이지는 미리 렌더링되고, 애플리케이션의 다른 페이지에는 동적인 전략(예: ISR, SSR, CSR 및 후속 탐색을 위한 스트리밍)을 선택.
            - 예시
                - Nextjs 13
                    - 리액트 서버 컴포넌트와 Nextjs 의 App Router를 결합하여 하이브리드 렌더링이 가진 잠재력을 보여줍니다.
                - Astro 2.0
                    - SSG와 SSR 중 하나틀 선택하는 대신, 정적 렌더링과 동적 렌더링의 장점을 모두 활용합니다.
                - Angular Universal 11.1
                    - 네이티브 하이브리드 렌더링을 지원하며, 정적 경로에는 사전 정적 렌더링을, 동적 경로에는 SSR을 수행할 수 있습니다.
                - Nuxt 3.0
                    - 하이브리드 렌더링을 지원하기 위한 라우팅 규칙을 설정할 수 있습니다.
        - 점진적 하이드레이션
            - 각 노드를 시간에 따라 개별적으로 하이드레이션하여 필요한 최소한의 자바스크립트만 요청하는 방식.
            - 페이지의 상대적으로 덜 중요한 부분의 하이드레이션을 지연시켜 페이지를 상호작용할 수 있게 만드는 데 필요한 자바스크립트 양을 줄이고, 사용자에게 필요한 노드만 하이드레이션.
            - SSR에서 흔히 발생하는 서버에서 렌더링된 DOM 트리가 파괴되고 즉시 다시 생성되는 문제를 방지 가능.
        - 아일랜드 아키텍처
            - 정적인 HTML 위에 독립적으로 전달될 수 있는 상호작용 아일랜드(islands of interactivity)를 통해 자바스크립트의 전송량을 줄이는 패러다임을 의미.
                - 정적 콘텐츠로 이루어진 페이지의 SSR을 지원.
                - 동적 콘텐츠를 위한 자리가 미리 마련.
                - 이 동적 콘텐츠 자리에는 자체적으로 완성된 컴포넌트 위젯.
            - 아일랜드 아키텍처와 점진적 하이드레이션의 차이.
                - 점진적 하이드레이션
                    - 페이지의 하이드레이션 구조 : 하향식
                    - 페이지가 개별 컴포넌트의 스케줄링 및 하이드레이션을 제어.
                - 아일랜드 아키텍처
                    - 각 컴포넌트가 자체적으로 하이드레이션 스크립트를 가지고 있으며, 이 스크립트는 페이지의 다른 스크립트와 독립적으로 비동기 실행.
                    - 특정 컴포넌트의 성능 문제가 다른 컴포넌트에 영향 X.
            - 아일랜드 아키텍처를 지원하는 프레임워크
                - Marko
                    - eBay에서 개발 및 유지보수하는 오픈 소스 프레임워크로, 서버 렌더링 성능 향상에 초점.
                - Astro
                    - 리액트, 스벨트, Preact, Vue.js 등 다른 프레임워크에서 만든 UI 컴포넌트를 사용하여 가벼운 정적 HTML 페이지를 생성할 수 있는 정적 사이트 빌더.
            - 아일랜드 아키텍처의 장단점
                - 성능
                    - 클라이언트에 전송되는 자바스크립트 코드의 양을 줄입니다.
                - SEO
                    - 모든 정적 콘텐츠가 서버에서 렌더링되므로 페이지는 검색 엔진 최적화에 유리.
                - 중요 콘텐츠 우선순위
                    - 블로그, 뉴스 기사 및 제품 페이지의 핵심 콘텐츠를 사용자가 즉시 볼 수 있습니다.
                - 접근성
                    - 표준 정적 HTML 링크를 사용하여 다른 페이지에 접근하므로 웹사이트의 접근성이 향상됩니다.
                - 컴포넌트 기반
                    - 재사용성과 유지보수 용이성과 같은 컴포넌트 기반 아키텍처의 모든 이점을 제공합니다.
                - 이러한 장점에도 소셜 미디어 애플리케이션과 같이 상호작용을 위주로 한 페이지에는 적합 X.
        - RSC. 리액트 서버 컴포넌트 (React Server Components)
            - 서버에서 실행되도록 설계된 상태를 가지지 않는 리액트 컴포넌트.
            - 서버 주도 방식으로 현대적인 사용자 경험을 제공하는 것이 목표.
            - 니팅(knitting)을 가능케 함.
                - 번들 크기를 0으로 줄이고, 서버 컴포넌트와 클라이언트 컴포넌트 사이의 매끄러운 코드 전환 경험
            - 니팅을 통해 SSR 방식과 차별화되며, 결과적으로 클라이언트 사이드 자바스크립트 번들의 크기를 크게 감소.
            - SSR을 대체 X.
                - 오히려 함께 사용하면 서버 컴포넌트 렌더링 초기 단계의 결과물을 빠르게 렌더링하고, SSR 인프라를 통해 HTML로 변환하여 초기 렌더링 속도를 빠르게 유지 가능.
            - 모든 리액트 프레임워크에서 사용 가능.
            - Next.js는 이미 App Router 기능을 통해 RSC를 지원.
    - Chapter 14 리액트 애플리케이션 구조
        - 리액트 애플리케이션에서 파일을 그룹화하는 방법
            - 기능별 그룹화
            - 파일 유형별 그룹화
            - 혼합 그룹화
        - 최신 리액트 기능을 위한 애플리케이션 구조
            - 리덕스
                - 특정 기능에 대한 로직을 한 곳에 모아두는 것을 강력하게 권장.
                - 슬라이스slice’ 파일.
                - 리덕스 Toolkit의 createSlice API를 사용.
                - 덕스ducks 패턴.
            - 컨테이너
            - Hooks
                - 공통 Hooks를 위한 폴더를 만들어 관리.
                - 단일 컴포넌트에서만 사용되는 Hooks는 해당 컴포넌트의 파일이나 컴포넌트 폴더 내 별도의 hooks.js 파일에 유지.
            - Styled Components
                - CSS 대신 Styled Components를 사용하는 경우에는 앞서 언급한 컴포넌트 수준의 CSS 파일 대신 style.js 파일을 사용.
            - Next.js
                - pages router
                    - 모든 라우트 파일은 pages 폴더 안에 위치해야 하며,
                    - 페이지의 URL은 루트 URL과 pages 폴더 내 상대 경로를 합친 게 됨.
                - app router
                    - app 폴더 내에 page 이름을 가진 파일을 만드는 것으로 URL이 생성.
            - 기타 모범 사례
                - Import aliasing 사용
                    - 공통 가져오기에 대한 긴 상대 경로를 줄이기 위해 import aliasing을 사용.
                    - Babel 및 웹팩 설정을 통해 구현 가능.
                - 외부 라이브러리 API로 감싸기
                    - 필요한 경우 교체할 수 있도록 외부 라이브러리를 자체 API로 감싸서 사용.
                - PropTypes 사용
                    - 컴포넌트에 PropTypes를 사용하여 속성 값의 유형 검사를 수행.

참고 자료 : [https://www.patterns.dev/](https://www.patterns.dev/)

## 다음 시간 :  12/11 수  저녁 7시

- 다음 주제 → Git
- Pro Git 책
    - [https://git-scm.com/book/ko/v2](https://git-scm.com/book/ko/v2)
- **2. [Git의 기초](https://git-scm.com/book/ko/v2/Git%ec%9d%98-%ea%b8%b0%ec%b4%88-Git-%ec%a0%80%ec%9e%a5%ec%86%8c-%eb%a7%8c%eb%93%a4%ea%b8%b0) 까지 보고오기.**
- 진영님이 진행!